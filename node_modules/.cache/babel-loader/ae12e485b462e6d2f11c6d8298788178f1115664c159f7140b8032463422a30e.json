{"ast":null,"code":"import React,{useState,useEffect}from'react';import ReactQuill from'react-quill';import{Link}from'react-router-dom';import'react-quill/dist/quill.snow.css';import styles from'../css/WritingPage.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const WritePage=()=>{const[isPrivate,setIsPrivate]=useState(false);const[content,setContent]=useState('');const[title,setTitle]=useState('');const[charCount,setCharCount]=useState(0);const[error,setError]=useState({title:'',content:''});const charLimit=1000;useEffect(()=>{// 컴포넌트가 마운트될 때 로컬 스토리지 초기화\nlocalStorage.removeItem('content');localStorage.removeItem('title');},[]);useEffect(()=>{const savedContent=localStorage.getItem('content');const savedTitle=localStorage.getItem('title');if(savedContent)setContent(savedContent);if(savedTitle)setTitle(savedTitle);},[]);useEffect(()=>{const timer=setTimeout(()=>{localStorage.setItem('content',content);localStorage.setItem('title',title);},5000);return()=>clearTimeout(timer);},[content,title]);const handlePrivateChange=()=>{setIsPrivate(!isPrivate);};const handleContentChange=value=>{if(value.length<=charLimit){setContent(value);setCharCount(value.length);}};const handleImageUpload=()=>{const input=document.createElement('input');input.type='file';input.accept='image/*';input.onchange=async()=>{const file=input.files[0];const reader=new FileReader();reader.onload=()=>{const base64Image=reader.result;setContent(content+\"<img src=\\\"\".concat(base64Image,\"\\\" alt=\\\"Uploaded Image\\\" />\"));};reader.readAsDataURL(file);};input.click();};const validateTitle=()=>{if(title.trim()===''){setError(prevError=>({...prevError,title:'제목을 입력해주세요.'}));return false;}else if(title.trim().length<3){setError(prevError=>({...prevError,title:'제목이 3글자 이상이어야 합니다.'}));return false;}else{setError(prevError=>({...prevError,title:''}));return true;}};const validateContent=()=>{if(content.trim()===''){setError(prevError=>({...prevError,content:'내용을 입력해주세요.'}));return false;}else{setError(prevError=>({...prevError,content:''}));return true;}};const scrollToTop=()=>{window.scrollTo({top:0});};const handleSubmit=e=>{const isTitleValid=validateTitle();const isContentValid=validateContent();if(!isTitleValid||!isContentValid){e.preventDefault();scrollToTop();}else{alert('등록이 완료되었습니다.');scrollToTop();}};const handleCancel=()=>{scrollToTop();};return/*#__PURE__*/_jsxs(\"div\",{className:styles.writePageContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.writeHeader,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",className:styles.titleInput,value:title,onChange:e=>{setTitle(e.target.value);validateTitle();},onBlur:validateTitle}),error.title&&/*#__PURE__*/_jsx(\"div\",{className:styles.error,children:error.title}),/*#__PURE__*/_jsxs(\"div\",{className:styles.privateContainer,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"private\",checked:isPrivate,onChange:handlePrivateChange,className:styles.privateCheckbox}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"private\",className:styles.privateLabel,children:\"\\uD68C\\uC6D0\\uB9CC \\uBCF4\\uAE30\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.editorContainer,children:[/*#__PURE__*/_jsx(ReactQuill,{value:content,onChange:value=>{handleContentChange(value);validateContent();},onBlur:validateContent,className:styles.textArea}),/*#__PURE__*/_jsxs(\"div\",{className:styles.charCount,children:[charCount,\"/\",charLimit]}),error.content&&/*#__PURE__*/_jsx(\"div\",{className:styles.error,children:error.content}),/*#__PURE__*/_jsx(\"button\",{onClick:handleImageUpload,className:styles.imageUploadButton,children:\"\\uC774\\uBBF8\\uC9C0 \\uC5C5\\uB85C\\uB4DC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.footer,children:[/*#__PURE__*/_jsx(Link,{to:\"/community\",className:styles.linkButton,children:/*#__PURE__*/_jsx(\"button\",{className:styles.cancelButton,onClick:handleCancel,children:\"\\uCDE8\\uC18C\"})}),/*#__PURE__*/_jsx(Link,{to:\"/community\",className:styles.linkButton,children:/*#__PURE__*/_jsx(\"button\",{className:styles.submitButton,onClick:handleSubmit,children:\"\\uB4F1\\uB85D\"})})]})]});};export default WritePage;","map":{"version":3,"names":["React","useState","useEffect","ReactQuill","Link","styles","jsx","_jsx","jsxs","_jsxs","WritePage","isPrivate","setIsPrivate","content","setContent","title","setTitle","charCount","setCharCount","error","setError","charLimit","localStorage","removeItem","savedContent","getItem","savedTitle","timer","setTimeout","setItem","clearTimeout","handlePrivateChange","handleContentChange","value","length","handleImageUpload","input","document","createElement","type","accept","onchange","file","files","reader","FileReader","onload","base64Image","result","concat","readAsDataURL","click","validateTitle","trim","prevError","validateContent","scrollToTop","window","scrollTo","top","handleSubmit","e","isTitleValid","isContentValid","preventDefault","alert","handleCancel","className","writePageContainer","children","writeHeader","placeholder","titleInput","onChange","target","onBlur","privateContainer","id","checked","privateCheckbox","htmlFor","privateLabel","editorContainer","textArea","onClick","imageUploadButton","footer","to","linkButton","cancelButton","submitButton"],"sources":["/Users/programsky/Documents/GitHub/Damoa_sky/src/component/WritingPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport { Link } from 'react-router-dom';\nimport 'react-quill/dist/quill.snow.css';\nimport styles from '../css/WritingPage.module.css';\n\nconst WritePage = () => {\n    const [isPrivate, setIsPrivate] = useState(false);\n    const [content, setContent] = useState('');\n    const [title, setTitle] = useState('');\n    const [charCount, setCharCount] = useState(0);\n    const [error, setError] = useState({ title: '', content: '' });\n    const charLimit = 1000;\n\n    useEffect(() => {\n        // 컴포넌트가 마운트될 때 로컬 스토리지 초기화\n        localStorage.removeItem('content');\n        localStorage.removeItem('title');\n    }, []);\n\n    useEffect(() => {\n        const savedContent = localStorage.getItem('content');\n        const savedTitle = localStorage.getItem('title');\n        if (savedContent) setContent(savedContent);\n        if (savedTitle) setTitle(savedTitle);\n    }, []);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            localStorage.setItem('content', content);\n            localStorage.setItem('title', title);\n        }, 5000);\n        return () => clearTimeout(timer);\n    }, [content, title]);\n\n    const handlePrivateChange = () => {\n        setIsPrivate(!isPrivate);\n    };\n\n    const handleContentChange = (value) => {\n        if (value.length <= charLimit) {\n            setContent(value);\n            setCharCount(value.length);\n        }\n    };\n\n    const handleImageUpload = () => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = 'image/*';\n        input.onchange = async () => {\n            const file = input.files[0];\n            const reader = new FileReader();\n            reader.onload = () => {\n                const base64Image = reader.result;\n                setContent(content + `<img src=\"${base64Image}\" alt=\"Uploaded Image\" />`);\n            };\n            reader.readAsDataURL(file);\n        };\n        input.click();\n    };\n\n    const validateTitle = () => {\n        if (title.trim() === '') {\n            setError((prevError) => ({ ...prevError, title: '제목을 입력해주세요.' }));\n            return false;\n        } else if (title.trim().length < 3) {\n            setError((prevError) => ({ ...prevError, title: '제목이 3글자 이상이어야 합니다.' }));\n            return false;\n        } else {\n            setError((prevError) => ({ ...prevError, title: '' }));\n            return true;\n        }\n    };\n\n    const validateContent = () => {\n        if (content.trim() === '') {\n            setError((prevError) => ({ ...prevError, content: '내용을 입력해주세요.' }));\n            return false;\n        } else {\n            setError((prevError) => ({ ...prevError, content: '' }));\n            return true;\n        }\n    };\n\n    const scrollToTop = () => {\n        window.scrollTo({\n            top: 0,\n        });\n    };\n\n    const handleSubmit = (e) => {\n        const isTitleValid = validateTitle();\n        const isContentValid = validateContent();\n        if (!isTitleValid || !isContentValid) {\n            e.preventDefault();\n            scrollToTop();\n        } else {\n            alert('등록이 완료되었습니다.');\n            scrollToTop();\n        }\n    };\n\n    const handleCancel = () => {\n        scrollToTop();\n    };\n\n    return (\n        <div className={styles.writePageContainer}>\n            <div className={styles.writeHeader}>\n                <input\n                    type=\"text\"\n                    placeholder=\"제목을 입력해주세요\"\n                    className={styles.titleInput}\n                    value={title}\n                    onChange={(e) => {\n                        setTitle(e.target.value);\n                        validateTitle();\n                    }}\n                    onBlur={validateTitle}\n                />\n                {error.title && <div className={styles.error}>{error.title}</div>}\n                <div className={styles.privateContainer}>\n                    <input\n                        type=\"checkbox\"\n                        id=\"private\"\n                        checked={isPrivate}\n                        onChange={handlePrivateChange}\n                        className={styles.privateCheckbox}\n                    />\n                    <label htmlFor=\"private\" className={styles.privateLabel}>\n                        회원만 보기\n                    </label>\n                </div>\n            </div>\n            <div className={styles.editorContainer}>\n                <ReactQuill\n                    value={content}\n                    onChange={(value) => {\n                        handleContentChange(value);\n                        validateContent();\n                    }}\n                    onBlur={validateContent}\n                    className={styles.textArea}\n                />\n                <div className={styles.charCount}>\n                    {charCount}/{charLimit}\n                </div>\n                {error.content && <div className={styles.error}>{error.content}</div>}\n                <button onClick={handleImageUpload} className={styles.imageUploadButton}>\n                    이미지 업로드\n                </button>\n            </div>\n            <div className={styles.footer}>\n                <Link to=\"/community\" className={styles.linkButton}>\n                    <button className={styles.cancelButton} onClick={handleCancel}>\n                        취소\n                    </button>\n                </Link>\n                <Link to=\"/community\" className={styles.linkButton}>\n                    <button className={styles.submitButton} onClick={handleSubmit}>\n                        등록\n                    </button>\n                </Link>\n            </div>\n        </div>\n    );\n};\n\nexport default WritePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}